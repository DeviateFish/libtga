/*! libtga 07-12-2014 */

!function(a){"use strict";var b=a.XMLHttpRequest||null,c=18,d=0,e=1,f=2,g=3,h=8,i=7,j=32,k=192,l=function(a){this.dataview=new DataView(a),this.header=l.readHeader(this.dataview),this.width=this.header.imageSpec.width,this.height=this.header.imageSpec.height,this.compressed=!!(this.header.imageType&h),this.imageId=l.readImageId(this.dataview,this.header),this.colorMap=l.readColorMap(this.dataview,this.header),this.imageData=l.readImage(this.dataview,this.header)};l.HEADER_SIZE=c,l.IMAGE_TYPE_NONE=d,l.IMAGE_TYPE_COLORMAPPED=e,l.IMAGE_TYPE_TRUECOLOR=f,l.IMAGE_TYPE_GREYSCALE=g,l.IMAGE_RUNLENGTH_ENCODED=h,l.readHeader=function(a){var b={idLength:a.getUint8(0,!0),mapType:a.getUint8(1,!0),imageType:a.getUint8(2,!0),colorMapSpec:l.readColorMapSpec(a,3),imageSpec:l.readImageSpec(a,8)};return b},l.readColorMapSpec=function(a,b){var c={firstEntry:a.getUint16(b,!0),colorMapLength:a.getUint16(b+2,!0),colorMapEntrySize:a.getUint8(b+4,!0)};return c},l.readImageSpec=function(a,b){var c=a.getUint8(b+9),d={xOrigin:a.getUint16(b,!0),yOrigin:a.getUint16(b+2,!0),width:a.getUint16(b+4,!0),height:a.getUint16(b+6,!0),pixelDepth:a.getUint8(b+8),descriptor:c,attributeBits:c&i,originUpper:(c&j)==j,interleave:(c&k)>>6};return d},l.readImageId=function(a,b){return new Uint8Array(a.buffer,c,b.idLength)},l.readColorMap=function(a,b){return new Uint8Array(a.buffer,c+b.idLength,b.colorMapSpec.colorMapLength*b.colorMapSpec.colorMapEntrySize)},l.readPixel15=function(a,b,c,d){var e=a.getUint16(b+2*c,!0);d[4*c+2]=31&e,d[4*c+1]=e>>5&31,d[4*c+0]=e>>10&31,d[4*c+3]=255},l.readPixel16=function(a,b,c,d){var e=a.getUint16(b+2*c,!0);d[4*c+2]=31&e,d[4*c+1]=e>>5&31,d[4*c+0]=e>>10&31,d[4*c+3]=128==(128&e)?255:0},l.readPixel24=function(a,b,c,d){d[4*c+2]=a.getUint8(b+3*c+0),d[4*c+1]=a.getUint8(b+3*c+1),d[4*c+0]=a.getUint8(b+3*c+2),d[4*c+3]=255},l.readPixel32=function(a,b,c,d){d[4*c+2]=a.getUint8(b+4*c+0),d[4*c+1]=a.getUint8(b+4*c+1),d[4*c+0]=a.getUint8(b+4*c+2),d[4*c+3]=a.getUint8(b+4*c+3)},l.readImage=function(a,b){var d=b.imageSpec.width,e=b.imageSpec.height,f=new Uint8ClampedArray(d*e*4),g=b.imageSpec.pixelDepth,h=c+b.idLength+b.colorMapSpec.colorMapLength*b.colorMapSpec.colorMapEntrySize,i=null;switch(g){case 16:i=l.readPixel15;break;case 15:i=l.readPixel16;break;case 24:i=l.readPixel24;break;case 32:i=l.readPixel32;break;default:throw"Unsupported pixel depth"}for(var j=0;d*e>j;j++)i(a,h,j,f);return f};var m={readFile:function(a){return new l(a)},loadFile:function(a,c){var d=new b;d.open("GET",a),d.responseType="arraybuffer",d.onload=function(){c(null,new l(this.response))},d.onerror=function(a){c(a,null)},d.send()},TGA:l};m.VERSION="0.1.0",a.libtga=m}(this);
//# sourceMappingURL=libtga.min.js.map